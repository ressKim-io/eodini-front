# 다음 작업 예정 목록

**작성일**: 2025-11-08
**현재 진행률**: 약 85%

---

## 📋 우선순위별 작업 목록

### 🔴 P0 - 최우선 (1주일 내)

#### 1. 역할별 홈 화면 구현
**현재 상태**: 관리자 관점의 홈 화면만 존재

**작업 내용**:
- [ ] 학부모(Parent) 홈 화면
  - 자녀 정보 카드
  - 자녀의 오늘 운행 일정
  - 자녀의 실시간 위치 (배정된 차량)
  - 자녀의 탑승/하차 기록 (최근 7일)
  - 빠른 액션: 자녀 정보 수정, 알림 설정

- [ ] 일반 회원(Passenger) 홈 화면
  - 본인 정보 카드
  - 오늘의 운행 일정
  - 실시간 위치 (배정된 차량)
  - 탑승/하차 기록 (최근 7일)
  - 빠른 액션: 정보 수정, 알림 설정

- [ ] 운전자(Driver) 홈 화면
  - 오늘의 운행 일정 목록
  - 현재 운행중인 경로 정보
  - 탑승자 체크리스트
  - 차량 정보 (배정된 차량)
  - 빠른 액션: 운행 시작/종료, 탑승자 체크

- [ ] 동승자(Attendant) 홈 화면
  - 오늘의 운행 일정
  - 탑승자 체크리스트
  - 경로 정보
  - 빠른 액션: 탑승자 체크

**예상 작업 시간**: 3-4일
**Mock 데이터**: 역할별 대시보드 통계 데이터 추가 필요

---

#### 2. 권한 기반 접근 제어 (RBAC)
**현재 상태**: 모든 화면이 모든 사용자에게 노출됨

**작업 내용**:
- [ ] 라우터 가드 개선
  - 역할별 접근 가능한 경로 정의
  - 권한 없는 경로 접근 시 403 페이지 표시

- [ ] 네비게이션 메뉴 역할별 필터링
  - 홈 화면 기능 카드 역할별 표시
  - 드로어/앱바 메뉴 역할별 표시

- [ ] 화면별 권한 체크
  - 차량 관리: admin만
  - 기사 관리: admin만
  - 경로 관리: admin만
  - 일정 관리: admin만
  - 운행 관리: admin, driver, attendant
  - 탑승자 정보: admin, parent (자녀만), passenger (본인만)

**예상 작업 시간**: 2일

---

### 🟡 P1 - 높음 (2주일 내)

#### 3. 데이터 필터링 (역할별)
**작업 내용**:
- [ ] 학부모: 자녀 데이터만 조회
  - Passenger 목록에서 자녀만 표시
  - Trip 목록에서 자녀가 포함된 운행만 표시
  - 실시간 위치에서 자녀가 탑승한 차량만 표시

- [ ] 일반 회원: 본인 데이터만 조회
  - 본인 탑승자 정보만 표시
  - 본인이 포함된 운행만 표시

- [ ] 기사: 본인 배정 데이터만 조회
  - 본인에게 배정된 운행만 표시
  - 본인이 운전하는 차량만 표시

**예상 작업 시간**: 2-3일
**백엔드 의존**: 역할별 필터링 API 필요

---

#### 4. 프로필 관리 기능
**작업 내용**:
- [ ] 프로필 조회 화면
  - 사용자 정보 표시
  - 프로필 이미지 업로드
  - 공개/비공개 설정 변경

- [ ] 프로필 편집 화면
  - 이름, 전화번호, 주소 수정
  - 비밀번호 변경
  - 공개/비공개 설정 토글

- [ ] 탑승자/기사 정보 편집 (연결된 경우)
  - Parent: 자녀 정보 수정 (제한적)
  - Passenger: 본인 탑승자 정보 수정
  - Driver: 면허 정보 수정 (제한적)

**예상 작업 시간**: 2일

---

### 🟢 P2 - 중간 (3주일 내)

#### 5. 알림 시스템 (FCM)
**작업 내용**:
- [ ] Firebase 프로젝트 설정
- [ ] FCM 토큰 관리
- [ ] 푸시 알림 수신
- [ ] 앱 내 알림 센터
- [ ] 알림 설정 화면
  - 탑승 알림 on/off
  - 하차 알림 on/off
  - 운행 시작 알림 on/off
  - 긴급 알림 (항상 수신)

**예상 작업 시간**: 3-4일
**백엔드 의존**: Kafka + FCM 알림 서버 필요

---

#### 6. 오프라인 모드 & 캐싱
**작업 내용**:
- [ ] 로컬 데이터베이스 (sqflite 또는 hive)
- [ ] 오프라인 데이터 조회
- [ ] 네트워크 상태 감지
- [ ] 재연결 시 동기화
- [ ] 이미지 캐싱

**예상 작업 시간**: 3-4일

---

### ⚪ P3 - 낮음 (추후)

#### 7. UI/UX 개선
- [ ] 다크모드 지원
- [ ] 애니메이션 추가
- [ ] 스켈레톤 로딩
- [ ] 에러 바운더리
- [ ] 빈 상태 화면 (Empty State)

**예상 작업 시간**: 2-3일

---

#### 8. 접근성 & 국제화
- [ ] 스크린 리더 지원
- [ ] 다국어 지원 (i18n)
  - 한국어 (기본)
  - 영어
- [ ] 폰트 크기 조절

**예상 작업 시간**: 2-3일

---

#### 9. 테스트 코드 작성
- [ ] 단위 테스트 (Unit Test)
  - Provider 테스트
  - Repository 테스트
  - 모델 테스트

- [ ] 위젯 테스트 (Widget Test)
  - 주요 화면 테스트
  - 폼 유효성 검사 테스트

- [ ] 통합 테스트 (Integration Test)
  - 로그인 플로우
  - 회원가입 플로우
  - 운행 관리 플로우

**예상 작업 시간**: 5-7일

---

## 🎯 단기 목표 (이번 주)

1. **역할별 홈 화면 구현** (3-4일)
   - Parent, Passenger, Driver, Attendant 홈 화면
   - Mock 데이터로 작동

2. **권한 기반 접근 제어** (2일)
   - 라우터 가드 및 메뉴 필터링

---

## 🏆 중기 목표 (2주일)

1. 데이터 필터링 (역할별)
2. 프로필 관리 기능
3. 알림 시스템 초기 설정

---

## 📊 장기 목표 (1개월)

1. 알림 시스템 완성 (FCM)
2. 오프라인 모드 & 캐싱
3. 테스트 코드 작성 (커버리지 70% 이상)
4. 성능 최적화

---

## 📝 각 작업별 체크리스트

### 역할별 홈 화면 구현 예시 (Parent)

```
[ ] ParentHomeScreen 생성
[ ] Mock 데이터 추가
  [ ] 자녀 정보 Mock
  [ ] 오늘 운행 일정 Mock
  [ ] 탑승/하차 기록 Mock
[ ] UI 구현
  [ ] 자녀 정보 카드
  [ ] 오늘 운행 일정 타임라인
  [ ] 빠른 액션 버튼들
[ ] 네비게이션 연결
[ ] 라우터 추가
[ ] PROGRESS.md 업데이트
[ ] BACKEND_TODO.md 업데이트 (필요 시)
```

---

## 🔄 작업 프로세스

### 새 기능 추가 시
1. **계획 수립**
   - 요구사항 정리
   - Mock 데이터 설계
   - UI 스케치

2. **구현**
   - 데이터 모델 추가/수정
   - Repository (Mock) 구현
   - Provider 구현
   - UI 화면 구현
   - 라우터 추가

3. **문서화**
   - `PROGRESS.md` 업데이트 (완료 작업)
   - `BACKEND_TODO.md` 업데이트 (백엔드 필요 항목)
   - `NEXT_STEPS.md` 체크박스 업데이트

4. **커밋 & 푸시**
   - 명확한 커밋 메시지
   - 변경사항 요약

---

## 💡 팁

### Mock 데이터 작성 시
- 현실적인 데이터 사용
- 다양한 케이스 고려 (정상/에러/빈 상태)
- 날짜는 상대 날짜 사용 (오늘 기준)

### UI 구현 시
- Material Design 3 가이드라인 준수
- 반응형 레이아웃 (모바일/태블릿)
- 에러 처리 및 로딩 상태 표시

### 백엔드 연동 준비
- DTO 클래스 미리 정의
- API 호출 위치에 TODO 주석
- `BACKEND_TODO.md`에 상세 기록

---

**마지막 업데이트**: 2025-11-08
**다음 작업**: 역할별 홈 화면 구현 (Parent 부터)
